const source=new EventSource("/events");source.addEventListener("log",function(t){const e=document.getElementById("log");let n=[["[1;31m","e"],["[0;33m","w"],["[0;32m","i"],["[0;35m","c"],["[0;36m","d"],["[0;37m","v"]],s="";for(const e of n)t.data.startsWith(e[0])&&(s=e[1]);""==s&&(e.innerHTML+=t.data+"\n"),e.innerHTML+='<span class="'+s+'">'+t.data.substr(7,t.data.length-11)+"</span>\n"}),actions=[["switch",["toggle"]],["light",["toggle"]],["cover",["open","close"]],["button",["press"]],["lock",["lock","unlock","open"]]],source.addEventListener("state",function(t){const e=JSON.parse(t.data);document.getElementById(e.id).children[1].innerText=e.state});const states=document.getElementById("states");let row,i=0;for(;row=states.rows[i];i++)if(row.children[2].children.length){for(const t of actions)if(row.classList.contains(t[0])){let e=row.id.substr(t[0].length+1);t[1].forEach((n,s)=>{row.children[2].children[s].addEventListener("click",function(){const s=new XMLHttpRequest;s.open("POST","/"+t[0]+"/"+e+"/"+n,!0),s.send()})})}row.classList.contains("select")&&function(t){row.children[2].children[0].addEventListener("change",function(){const e=new XMLHttpRequest;e.open("POST","/select/"+t+"/set?option="+encodeURIComponent(this.value),!0),e.send()})}(row.id.substr(7))}